## 쿠키와 세션을 사용하는 이유
HTTP 프로토콜의 특징이자 약점을 보완하기 위해서 사용한다.   

## HTTP 프로토콜 특징
1. **비연결지향**
- HTTP는 먼저 클라이언트가 서버에게 request를 보내면, 서버는 클라이언트에게 요청에 맞는 response를 보내고 접속을 끊는다.
- HTTP1.1 버전에서는 커넥터를 계속 열어두고(연결을 유지) request를 재활용 하는 기능이 추가되었다.
- 헤더에 keep-alive 값을 줘서 커넥션을 재활용 하지만 비연결지향은 연결 비용을 줄이는 것이 확실한 장점이다.

2. **상태정보 유지안함**
- 연결을 끊는 순간 클라이언트와 서버의 통신이 끝나며 상태 정보는 유지하지 않는 특성이 있다.
- HTTP의 두가지 특성을 보완하기 위해서 **쿠키**와 **세션**을 사용하게 되었다.
- 비연결지향이라 통신 연결을 유지하지 않아 리소스 낭비를 없애는 장점이 있지만, 통신할 때마다 커넥션을 열기 때문에 클라이언트는 계속 인증을
해야한다는 단점이 있다.
- 쿠키와 세션이 없었다면 페이지에 옮겨다닐 때마다 로그인을 해야한다.


## Cookie(쿠키)
- 쿠키는 클라이언트로 로컬에 저장되는 키/값이 들어있는 작은 파일이다.
- 쿠키에는 이름, 값, 만료 날짜, 경로 정보가 있다.
- 쿠키는 일정 시간 동안 데이터를 저장할 수 있다. ( 로그인 상태 유지에 활용 )
- 쿠키는 클라이언트의 상태 정보를 로컬에 저장했다가 참조한다. (클라이언트가 request 시 header에 쿠키값 넣어 전송)

### 쿠키 프로세스
1. 브라우저로 웹 페이지 접속
2. 클라이언트가 요청한 웹페이지를 받으면서 쿠키를 클라이언트 로컬에 저장
3. 클라이언트가 재요청시 웹페이지 요청과 함께 쿠키값 전송
4. 지속적으로 로그인 정보를 갖고있는 것처럼 사용

### 쿠키 사용 예시
자동 로그인, 쇼핑몰의 장바구니


## Session(세션)
- 일정 시간동안 같은 브라우저로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술
- 웹브라우저를 통해 웹 서버에 접속한 이후로 브라우저를 종료할 때까지 유지되는 상태
- 클라이언트가 request를 보내면 해당 서버에서 클라이언트에게 유일한 ID(세션)를 부여

### 세션 프로세스
1. 클라이언트가 서버에 접속 시 세션 ID 발급
2. 서버에서는 클라이언트로 발급해준 세션 ID를 쿠키를 사용해 저장(JSESSIONID)
3. 클라이언트는 다시 접속할 때, 이 쿠키(JSESSIONID)를 이용해서 세션ID 값을 서버에 전달
세션을 구별하기 위해 ID가 필요(쿠키를 이용해 저장). 쿠키는 서버에 전송되니까 서버에서 세션ID에 따른 처리가 가능

### 세션 사용 예시
로그인 정보 유지


## Cookie & Session 차이점
1. **저장 위치**
쿠키는 클라이언트에 파일로 저장, 세션은 서버에 저장

2. **보안**
쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 request에서 스나이핑 당할 우려가 있어 보안에 취약   
세션은 쿠키를 이용해서 sessionid만 저장하고 그걸로 서버에서 처리하기 때문에 보안이 좋다.

3. **라이프 사이클**
쿠키는 만료시간이 있어서 브라우저를 종료해도 계속 정보가 남아있다.   
세션은 브라우저가 종료되면 삭제된다.

4. **속도**
쿠키는 서버에 요청시 속도가 빠르다.(로컬에서 정보를 갖고 있어서)   
세션은 정보가 서버에 있기 때문에 처리속도가 비교적 느리다.   


## 주로 세션을 안쓰고 쿠키를 쓰는 이유
세션은 서버의 자원을 사용하기 때문에 무분별하게 만들다보면 서버의 메모리가 감당할 수 없어질 수도 있고 속도가 느려진다.


출처 : https://jeong-pro.tistory.com/80